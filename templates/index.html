<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <title>Tariff Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
    <!-- App CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}?v=20251114" />
    <!-- Favicons (optional) -->
    <link rel="icon" href="{{ url_for('static', filename='favicon/favicon.ico') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}">
</head>
<body>
    <header class="top-bar">
        <div class="top-bar-left">
            <h1>Tariff Map</h1>
            <span class="subtitle">Zalogowany: {{ user }}</span>
        </div>
        <div class="top-bar-right">
            <a href="{{ url_for('web.logout') }}">Wyloguj</a>
        </div>
    </header>

    <!-- GÃ³rny pasek sterowania trasÄ… -->
    <section class="top-controls">
        <div class="controls-row">
            <div class="field from">
                <label for="route-from">SkÄ…d</label>
                <input id="route-from" list="locations-list" placeholder="np. Poland (POL) lub Port of Rotterdam [PORT_ROTTERDAM]" />
            </div>
            <div class="field to">
                <label for="route-to">DokÄ…d</label>
                <input id="route-to" list="locations-list" placeholder="np. Germany (DEU) lub Frankfurt Airport [AIR_FRA]" />
            </div>
            <datalist id="locations-list"></datalist>

            <div class="field compact">
                <label>Presety</label>
                <div class="btn-group">
                    <button type="button" id="preset-cheap" class="btn btn-ghost">NajtaÅ„sza</button>
                    <button type="button" id="preset-balanced" class="btn btn-ghost">Zbalansowana</button>
                    <button type="button" id="preset-fast" class="btn btn-ghost">Najszybsza</button>
                </div>
            </div>

            <div class="field factors">
                <label>Wagi transportu</label>
                <div class="factors-grid">
                    <span>Droga</span>
                    <input id="factor-road" type="number" step="0.1" min="0.1" max="10" value="1.0" />
                    <span>Morze</span>
                    <input id="factor-sea" type="number" step="0.1" min="0.1" max="10" value="0.5" />
                    <span>Lotniczy</span>
                    <input id="factor-air" type="number" step="0.1" min="0.1" max="10" value="5.0" />
                </div>
            </div>

            <div class="field compact actions">
                <label>Mapa</label>
                <div class="btn-group">
                    <button type="button" id="route-pick-start" class="btn">Wybierz na mapie</button>
                    <button type="button" id="route-pick-cancel" class="btn btn-ghost">Anuluj</button>
                    <button type="button" id="route-go" class="btn btn-primary">ZnajdÅº trasÄ™</button>
                </div>
            </div>
        </div>
    </section>

    <div class="layout">
        <aside class="sidebar">
            <h2>Legenda</h2>
            <div id="selected-country" class="selected-country">
                Brak wybranego kraju.
            </div>
            <div id="legend" class="legend"></div>
        </aside>

        <main class="main-map-container">
            <div id="map"></div>
            <!-- Prawy panel â€“ trasa -->
            <aside id="right-drawer" class="right-drawer">
                <div class="drawer-header">
                    <h3>Trasa</h3>
                    <div class="btn-group">
                        <button id="drawer-dock" class="btn btn-ghost" title="Dokuj/Odkuj">ğŸ“Œ</button>
                        <button id="drawer-toggle" class="btn btn-ghost" title="PokaÅ¼/ukryj">â‡¤</button>
                    </div>
                </div>
                <div id="route-summary" class="drawer-summary"></div>
                <div id="route-legs" class="drawer-legs"></div>
                <div class="drawer-legend">
                    <span class="chip" style="background:#6b7280"></span> droga/kolej
                    <span class="chip" style="background:#3b82f6"></span> morze
                    <span class="chip" style="background:#f97316"></span> lotniczy
                </div>
            </aside>
        </main>
    </div>

    <!-- Instrukcja obsÅ‚ugi -->
    <footer class="instructions">
        <h3>Jak korzystaÄ‡</h3>
        <ol>
            <li>Wybierz punkt startu i celu u gÃ³ry (kraj lub wÄ™zeÅ‚: port/lotnisko/miasto) albo uÅ¼yj trybu â€Wybierz na mapieâ€.</li>
            <li>Ustaw wagi transportu lub skorzystaj z presetÃ³w.</li>
            <li>Kliknij â€ZnajdÅº trasÄ™â€ â€“ wynik pojawi siÄ™ po prawej, a trasa narysuje siÄ™ na mapie.</li>
            <li>NajedÅº na kraje, by zobaczyÄ‡ stawki celne; klikniÄ™cie kraju ustawia go jako kraj docelowy do kolorowania ceÅ‚.</li>
        </ol>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- App JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}?v=20251114"></script>
</body>
</html>

